package com.yihu.jw.manage.controller.system;import com.yihu.jw.manage.model.system.ManageUserRole;import com.yihu.jw.manage.service.system.UserRoleService;import com.yihu.jw.restmodel.web.Envelop;import io.swagger.annotations.Api;import io.swagger.annotations.ApiOperation;import io.swagger.annotations.ApiParam;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.data.domain.Page;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestParam;import org.springframework.web.bind.annotation.RestController;import java.util.List;/** * Created by Administrator on 2017/6/26 0026. */@RestController@RequestMapping("/manage")@Api(description = "用户管理")public class UserRoleController {    @Autowired    private UserRoleService userRoleService;    @GetMapping("userRole/list")    @ApiOperation(value = "用户权限列表")    public Envelop list(            @ApiParam(name = "roleCode", value = "roleCode", required = true) @RequestParam(required = true, name = "roleCode") String roleCode,            @ApiParam(name = "start", value = "当前页(0开始)", required = false) @RequestParam(required = false, name = "start", defaultValue = "0") Integer page,            @ApiParam(name = "length", value = "每页显示条数", required = false) @RequestParam(required = false, name = "length", defaultValue = "10") Integer pageSize    ) {        try {            page=page/pageSize;            Page<ManageUserRole> manageUserRoles = userRoleService.list(roleCode, page, pageSize);            return Envelop.getSuccessListWithPage(                    "获取信息成功",                    manageUserRoles.getContent(),//数据内容                    page, //当前页                    pageSize,//每个显示条数                    manageUserRoles.getTotalElements()//总数            );        } catch (Exception e) {            return Envelop.getError("获取信息失败:" + e.getMessage(), -1);        }    }    @GetMapping("userRole/getUserCodes")    @ApiOperation(value = "根据权限code查找用户")    public Envelop getUserCodes(@ApiParam(name = "roleCode", value = "roleCode", required = true) @RequestParam(required = true, name = "roleCode") String roleCode){        List<String> userCodes = userRoleService.getUserCodes(roleCode);        return Envelop.getSuccess("查询成功",userCodes);    }    @GetMapping("userRole/changeUserRole")    @ApiOperation(value = "更新用户权限组")    public Envelop changeUserRole(            @ApiParam(name = "roleCode", value = "roleCode", required = true) @RequestParam(required = true, name = "roleCode") String roleCode,            @ApiParam(name = "usercode", value = "usercode", required = true) @RequestParam(required = true, name = "usercode") String usercode){        userRoleService.changeUserRole(roleCode,usercode);        return Envelop.getSuccess("更新成功",null);    }}